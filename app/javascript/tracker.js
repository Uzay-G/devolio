"use strict";var _this=void 0,queue=window.fathom.q||[],config={siteId:"",trackerUrl:""},commands={set:set,trackPageview:trackPageview,setTrackerUrl:setTrackerUrl};function set(e,t){config[e]=t}function setTrackerUrl(e){return set("trackerUrl",e)}function stringifyObject(t){return"?"+Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function randomString(e){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";return Array(e).join().split(",").map(function(){return t.charAt(Math.floor(Math.random()*t.length))}).join("")}function getCookie(e){for(var t=document.cookie?document.cookie.split("; "):[],n=0;n<t.length;n++){var r=t[n].split("=");if(decodeURIComponent(r[0])===e){var i=r.slice(1).join("=");return decodeURIComponent(i)}}return""}function setCookie(e,t,n){var r=(e=encodeURIComponent(e))+"="+(t=encodeURIComponent(String(t)));n.path&&(r+=";path="+n.path),n.expires&&(r+=";expires="+n.expires.toUTCString()),document.cookie=r}function newVisitorData(){return{isNewVisitor:!0,isNewSession:!0,pagesViewed:[],previousPageviewId:"",lastSeen:+new Date}}function getData(){var e=new Date;e.setMinutes(e.getMinutes()-30);var t=getCookie("_fathom");if(!t)return newVisitorData();try{t=JSON.parse(t)}catch(e){return console.error(e),newVisitorData()}return t.lastSeen<+e&&(t.isNewSession=!0),t}function findTrackerUrl(){var e=document.getElementById("fathom-script");return e?e.src.replace("tracker.js","collect"):""}function trackPageview(){if(!("doNotTrack"in navigator&&"1"===navigator.doNotTrack||"visibilityState"in document&&"prerender"===document.visibilityState)){var e=window.location,t=document.querySelector('link[rel="canonical"][href]');if(t){var n=document.createElement("a");n.href=t.href,e=n}var r=e.pathname+e.search,i=e.protocol+"//"+e.hostname;r||(r="/");var o="";document.referrer.indexOf(location.hostname)<0&&(o=document.referrer);var a=getData(),c={id:randomString(20),pid:a.previousPageviewId||"",p:r,h:i,r:o,u:-1==a.pagesViewed.indexOf(r)?1:0,nv:a.isNewVisitor?1:0,ns:a.isNewSession?1:0,sid:config.siteId},s=config.trackerUrl||findTrackerUrl(),d=document.createElement("img");d.src=s+stringifyObject(c),d.addEventListener("load",function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24,0,0);-1==a.pagesViewed.indexOf(r)&&a.pagesViewed.push(r),a.previousPageviewId=c.id,a.isNewVisitor=!1,a.isNewSession=!1,a.lastSeen=+new Date,setCookie("_fathom",JSON.stringify(a),{expires:t,path:"/"}),document.body.removeChild(d)}),window.setTimeout(function(){d.parentNode&&(d.src="",document.body.removeChild(d))},1e3),document.body.appendChild(d)}}window.fathom=function(){var e=[].slice.call(arguments),t=e.shift();commands[t].apply(this,e)},queue.forEach(function(e){return fathom.apply(_this,e)});
